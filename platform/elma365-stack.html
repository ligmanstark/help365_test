<!DOCTYPE html>
<html lang="ru">

<head>
    <title>Установка ELMA365 stack</title>
    <meta name="generator" content="Help+Manual" />
    <meta name="keywords" content="" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="ELMA365 On-Premises можно установить в уже существующий Kubernetes-кластер. ELMA365 поставляется в виде Helm-чартов:" />
    <meta name="picture" content="" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Cправка по Low-code платформе ELMA365" />
    <meta property="og:url" content="https://elma365.com/ru/help" />
    <meta property="og:image" content="" />
    <meta property="og:site_name" content="ELMA365" />                                                              
    <link rel="icon" href="favicon.png" type="image/png" />
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="./jquery-ui.css" />
    <link rel="stylesheet" href="default.css" />
    <link rel="stylesheet" href="./search-yandex.css" />
    <link rel="stylesheet" href="./article.css" />
    <link rel="stylesheet" href="./glossary.css" />
    <link rel="stylesheet" href="./theme.css" />
   <script type="text/javascript" src="jquery.js"></script>
   <script type="text/javascript" src="helpman_settings.js"></script>
   <script type="text/javascript" src="helpman_topicinit.js"></script>

   <script type="text/javascript" src="highlight.js"></script>
   <script type="text/javascript">
     $(document).ready(function(){highlight();});
   </script>
</head>

<body>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-M6ETBEC1R9"></script><script>window.dataLayer=window.dataLayer || []; function gtag(){dataLayer.push(arguments);}gtag('js', new Date()); gtag('config', 'G-M6ETBEC1R9');</script>
    <script>!function(e,t,c,n,r,a,m){e.ym=e.ym||function(){(e.ym.a=e.ym.a||[]).push(arguments)},e.ym.l=1*new Date;for(var s=0;s<document.scripts.length;s++)if(document.scripts[s].src===n)return;a=t.createElement(c),m=t.getElementsByTagName(c)[0],a.async=1,a.src=n,m.parentNode.insertBefore(a,m)}(window,document,"script","https://mc.yandex.ru/metrika/tag.js"),ym(83179930,"init",{clickmap:!0,trackLinks:!0,accurateTrackBounce:!0,webvisor:!0})</script><noscript><div><img alt=""src=https://mc.yandex.ru/watch/83179930 style=position:absolute;left:-9999px></div></noscript> 
    
    ﻿<header class="header elma-365">
  <div class="container">
    <a class="header__logo" href="https://elma365.com/ru/help">
      <img src="./logo.svg">
    </a>
 <!-- <div class="hero__search-form" id="search-panel">
   <form class="search-form" onsubmit="ym(83179930,'reachGoal','poisk')">
     <label class="search-form__label">
       <span id="reset-search" class="search__icon"></span>
       <input class="search-form__input" type="text">
     </label>
     <input class="search-form__submit" type="submit" value="Submit">
   </form>
  </div>       -->
  
     <div class="hero__search-form" id="search-panel"> <form class="search-form"> <label class="search-form__label"> <span id="reset-search" class="search__icon"></span> <input class="search-form__input" type="text"> </label> <input class="search-form__submit" type="submit" value="Submit"> </form> </div> 
  <div class="hero__search">
      <a href="#" id="search-icon" class="hero__search-icon">
        <img src="search-icon-white.svg" alt="search string">
      </a>
      <a href="#" id="side-menu-icon" class="hero__side-icon">
        <img src="side_menu.svg" alt="side menu">
      </a>
    </div>  
  <div class="header__navi">
        
        <ul class="header__list"><li><span class="solution-select"><span class="solution-select__selected"></span><svg width="7" height="4" viewBox="0 0 7 4" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1 1L3.5 3.5L6 1" stroke="white" stroke-linecap="round" stroke-linejoin="round"/></svg><ul class="solution-select__list"><li><a class="project-link" href="https://elma365.com/ru/help/platform/get-trial.html">Платформа</a></li><li><a class="project-link" href="https://elma365.com/ru/help/ecm/ecm-functions.html">ECM</a></li><li><a class="project-link" href="https://elma365.com/ru/help/crm/crm_overview.html">CRM</a></li><li><a class="project-link" href="https://elma365.com/ru/help/service/service-functions.html">Service</a></li><li><a class="project-link" href="https://elma365.com/ru/help/projects/projects-functions.html">Проекты</a></li><li><a class="project-link" href="https://elma365.com/ru/help/business_solutions/-elma365-store.html">Бизнес-решения</a></li></ul></span></li><li><a href="https://api.elma365.com/ru/"target="_blank">API</a></li><li><a href="https://tssdk.elma365.com/"target="_blank">SDK</a></li><li><a href="https://community.elma365.com/" target="_blank">Community</a></li><li><a href="https://elma-academy.com/ru/" target="_blank">Академия</a></li><li><a href="https://elma365.com/ru/" target="_blank">Сайт ELMA365</a></li></ul> 
        
        
   </div>
  </div>

</header>



    
    <main class="main container">

        <aside class="sidebar" id="sidebar">
        <div class="sidebar__header">
                 <a class="header__logo" href="https://elma365.com/ru/help">
                    <img src="./logo-light.svg">
                 </a>
                    <span class="sidebar__close elma-365-close" id="close"></span>
            </div>
            <div class="sidebar__wrapper" id="side-menu">
                
            </div>
        </aside>

        <article class="article" id="article">
            <div class="article-inner">           
                <div class="content">
                    <header class="article__header">
                    <div class="article__bread" style="display:flex; gap:10px;">
                        <span id="subcategory" class="search-res__item-category search-res__item-category_subcategory subcategory article__badge"></span>
                        
                            <div class="topic__breadcrumbs">     
                                <p><a href="elma365-on-premises.html">ELMA365 On-Premises</a> &gt; Дополнительно / Установка ELMA365 stack</p>
                            </div>
                        
                    </div>
                        <div class="topic__title"><h1 class="p_Heading1"><span class="f_Heading1">Установка ELMA365 stack</span></h1>
</div>
                    
</header>
                    <section class="article__content">
                        <div class="scroll-top-inner">
                            <a href="#h1-article" class="scroll-top"></a>
                        </div>
                        <!-- Placeholder for topic body. -->
                        <p class="p_Normal">ELMA365 On-Premises можно установить в уже существующий Kubernetes-кластер. ELMA365 поставляется в виде Helm-чартов:</p>
<ul style="list-style-type:disc">
<li class="p_Normal"><span style="font-weight: bold;">elma365-stack</span> — полный стэк ELMA365, включает в себя Helm-пакеты <code><b>elma365</b></code>, <code><b>elma365-dbs</b></code> и <code><b>elma365-addons</b></code>; </li><li class="p_Normal"><span style="font-weight: bold;">elma365</span> — пакет приложения ELMA365; </li><li class="p_Normal"><span style="font-weight: bold;">elma365-dbs</span> — набор баз данных и хранилищ, необходимых для работы ELMA365. Также есть возможность использовать собственные базы данных PostgreSQL, MongoDB, Redis, RabbitMQ, хранилище S3, указав строки подключения к ним <code><b>values</b></code> пакета <span style="font-weight: bold;">elma365</span>. При этом в файле <code><b>values.yaml</b></code> установку соответствующих компонентов можно отключить, выставив значение <code><b>false</b></code>, например, для PostgreSQL<span style="font-weight: bold;"> </span><code><b>global.postgresql.enabled</b></code>. Если все пять компонентов чарта будут выставлены в <code><b>false</b></code>, установка этого чарта не требуется. О создании баз данных читайте в разделе <a href="postgresql.html" class="topiclink">«Подготовка внешних баз данных»</a>; </li><li class="p_Normal"><span style="font-weight: bold;">elma365-addons</span> — дополнения для ELMA365 Enterprise, включающие в себя систему маршрутизации (Service Mesh) <span style="font-weight: bold;">Linkerd</span>, систему мониторинга <span style="font-weight: bold;">Prometheus + Grafana</span>, а также <span style="font-weight: bold;">Descheduler</span>, <span style="font-weight: bold;">NodeLocal DNSCache</span> и модуль <span style="font-weight: bold;">Аудит безопасности</span>. </li></ul>
<p class="p_CodeExample" style="page-break-inside: avoid;"><span class="f_CodeExample">начало&nbsp;внимание</span></p>
<p class="p_Normal">Чарты <span style="font-weight: bold;">elma365-extension</span> больше не поддерживаются. Переход на чарты <span style="font-weight: bold;">elma365-dbs</span> с новыми версиями баз данных выполняется с помощью дампа и его восстановления.</p>
<p class="p_CodeExample" style="page-break-inside: avoid;"><span class="f_CodeExample">конец&nbsp;внимание&nbsp;</span></p>
<h2 class="p_Heading2"><span class="f_Heading2">Требования к конфигурации Kubernetes</span></h2>
<p class="p_Normal">Установленная версия кластера Kubernetes должна поддерживать <span style="font-weight: bold;">Kubernetes API v.2</span> (версия Kubernetes не ниже 1.21) и содержать следующие компоненты:<span style="font-weight: bold;"> ingress-nginx</span> <span style="font-weight: bold;">контроллер</span>, <span style="font-weight: bold;">coredns</span>, <span style="font-weight: bold;">rbac</span>, <span style="font-weight: bold;">storageclass</span>.</p>
<p class="p_Normal">Установка производится с использованием Helm v.3.</p>
<p class="p_Normal">Должно быть разрешено проксирование из подов во внешнюю сеть.</p>
<h2 class="p_Heading2"><span class="f_Heading2">Установка ELMA365 с помощью чарта elma365-stack</span></h2>
<ol style="list-style-type:upper-roman">
<li value="1" class="p_Normal">Добавьте репозиторий Helm ELMA365 и извлеките список переменных пакета приложения со всеми необходимыми компонентами в файл:</li></ol>
<p class="p_CodeExample" style="page-break-inside: avoid;"><span class="f_CodeExample">helm&nbsp;repo&nbsp;add&nbsp;</span><span class="f_CodeExample">elma365&nbsp;https://charts.elma365.tech</span><br />
<span class="f_CodeExample">helm&nbsp;repo&nbsp;update</span><br />
<span class="f_CodeExample">helm&nbsp;show&nbsp;values&nbsp;elma365/elma365-stack&nbsp;&gt;&nbsp;values-elma365-stack.yaml</span></p>
<ol style="list-style-type:upper-roman" start="2">
<li value="2" class="p_Normal">Заполните переменные в файле <code><b>values-elma365-stack.yaml</b></code>, заменив как минимум следующие параметры:</li></ol>
<ul style="list-style-type:disc">
<li class="p_Normal"><code><b>elma365.global.host</b></code> — домен (FQDN) или IP-адрес, по которому будет доступна система; </li><li class="p_Normal"><code><b>elma365.bootstrapCompany.email</b></code> — электронная почта администратора; </li><li class="p_Normal"><code><b>elma365.bootstrapCompany.password</b></code> — пароль администратора;</li><li class="p_Normal"><code><b>elma365.db.psqlUrl</b></code> — строка подключения к БД PostgreSQL;</li><li class="p_Normal"><code><b>elma365.db.mongoUrl</b></code> — строка подключения к БД MongoDB для приложения; </li><li class="p_Normal"><code><b>elma365.db.vahterMongoUrl</b></code> — строка подключения к БД MongoDB для сервера авторизации; </li><li class="p_Normal"><code><b>elma365.db.redisUrl</b></code> — строка подключения к Redis; </li><li class="p_Normal"><code><b>elma365.db.amqpUrl</b></code> — строка подключения к RabbitMQ; </li><li class="p_Normal"><code><b>elma365.db.s3.method</b></code> — метод запросов к S3; </li><li class="p_Normal"><code><b>elma365.db.s3.accesskeyid</b></code> — имя пользователя S3;</li><li class="p_Normal"><code><b>elma365.db.s3.secretaccesskey</b></code> — пароль для пользователя S3; </li><li class="p_Normal"><code><b>elma365.db.s3.bucket</b></code> — бакет S3; </li><li class="p_Normal"><code><b>elma365.db.s3.backend.address</b></code> — адрес S3; </li><li class="p_Normal"><code><b>elma365.db.s3.backend.region</b></code> — регион S3; </li><li class="p_Normal"><code><b>elma365.db.s3.ssl.enabled</b></code> — включение SSL S3. </li></ul>
<ol style="list-style-type:upper-roman" start="3">
<li value="3" class="p_Normal">Если требуется создать отдельный <code><b>namespace</b></code>, укажите его во всех командах установки.</li><li value="4" class="p_Normal">Сохраните файл <code><b>values-elma365-stack.yaml</b></code> для последующих обновлений.</li></ol>
<h2 class="p_Heading2"><span class="f_Heading2">Установка баз данных</span></h2>
<ol style="list-style-type:upper-roman">
<li value="1" class="p_Normal">При использовании своих баз данных установку встроенных баз можно пропустить, изменив значение в параметре <code><b>global.elma365-dbs.enabled</b></code> на <code><b>false</b></code> в файле <code><b>values-elma365-stack.yaml</b></code>. В случае использования одной или нескольких внешних баз, например, PostgreSQL, можно пропустить его установку, изменив параметр <code><b>global.postgresql.enabled</b></code> на <code><b>false</b></code>.</li><li value="2" class="p_Normal">Выполните установку баз данных. На этом шаге необходимо отключить установку приложения ELMA365 следующей командой (обратите внимание на параметр <code><b>--set global.elma365.enabled=false</b></code>):</li></ol>
<p class="p_CodeExample" style="page-break-inside: avoid;"><span class="f_CodeExample">helm&nbsp;upgrade&nbsp;--install&nbsp;elma365-stack&nbsp;elma365/elma365-stack&nbsp;\</span><br />
<span class="f_CodeExample">-f&nbsp;values-elma365-stack.yaml&nbsp;\</span><br />
<span class="f_CodeExample">&nbsp;--set&nbsp;global.elma365.enabled=</span><span class="f_CodeExample" style="font-weight: bold;">false</span><span class="f_CodeExample">&nbsp;\</span><br />
<span class="f_CodeExample">&nbsp;--timeout=30m&nbsp;--wait&nbsp;\</span><br />
<span class="f_CodeExample">&nbsp;[-n&nbsp;namespace]</span></p>
<h2 class="p_Heading2"><span class="f_Heading2">Установка приложения ELMA365</span></h2>
<ol style="list-style-type:upper-roman">
<li value="1" class="p_Normal">Если необходимо восстановить дамп, перед установкой ELMA365 вы можете воспользоваться утилитой <a href="database-backup-and-recovery.html" class="topiclink">elma365-backupper</a> или выполнить скрипт <code><b>elma365db.sh</b></code> из чарта <span style="font-weight: bold;">elma365</span>.</li></ol>
<p class="p_Normal" style="margin: 0 0 0 36px;">Пример выполнения скрипта:</p>
<p class="p_CodeExample" style="page-break-inside: avoid;"><span class="f_CodeExample">helm&nbsp;pull&nbsp;elma365/elma365-stack&nbsp;--untar</span><br />
<span class="f_CodeExample">./elma365-stack/charts/elma365/elma365db.sh&nbsp;--restore&nbsp;--path&nbsp;/backup/path/&nbsp;\</span><br />
<span class="f_CodeExample">[--kubeconfig&nbsp;/path/to/config&nbsp;--context&nbsp;prod]&nbsp;[-n&nbsp;namespace]</span></p>
<ol style="list-style-type:upper-roman">
<li value="2" class="p_Normal">Выполните установку приложения ELMA365 командой:</li></ol>
<p class="p_CodeExample" style="page-break-inside: avoid;"><span class="f_CodeExample">helm&nbsp;upgrade&nbsp;--install&nbsp;elma365-stack&nbsp;elma365/elma365-stack&nbsp;\</span><br />
<span class="f_CodeExample">-f&nbsp;values-elma365-stack.yaml&nbsp;\</span><br />
<span class="f_CodeExample">--timeout=30m&nbsp;--wait&nbsp;[-n&nbsp;namespace]</span></p>
<ol style="list-style-type:upper-roman">
<li value="3" class="p_Normal">Для создания дампа можно воспользоваться утилитой <a href="database-backup-and-recovery.html" class="topiclink">elma365-backupper</a> или выполнить скрипт <code><b>elma365db.sh</b></code> из чарта <span style="font-weight: bold;">elma365.</span></li></ol>
<p class="p_Normal" style="margin: 0 0 0 36px;">Пример использования скрипта:</p>
<p class="p_CodeExample" style="page-break-inside: avoid;"><span class="f_CodeExample">helm&nbsp;pull&nbsp;elma365/elma365-stack&nbsp;--untar</span><br />
<span class="f_CodeExample">./elma365-stack/charts/elma365/elma365db.sh&nbsp;--dump&nbsp;--path&nbsp;/backup/path/&nbsp;\</span><br />
<span class="f_CodeExample">[--kubeconfig&nbsp;/path/to/config&nbsp;--context&nbsp;prod]&nbsp;[-n&nbsp;namespace]</span></p>
<h2 class="p_Heading2"><span class="f_Heading2">Установка средств мониторинга (опционально)</span></h2>
<ol style="list-style-type:upper-roman">
<li value="1" class="p_Normal">В файле <code><b>values-elma365-stack.yaml</b></code> отключите неиспользуемые компоненты, изменив значение в параметрах <code><b>global.linkerd2.enabled</b></code>, <code><b>global.descheduler.enabled</b></code>, <code><b>global.node-local-dns.enabled</b></code> и <code><b>global.audit.enabled</b></code> на <code><b>false</b></code>, так как для их установки необходимы предварительные настройки.</li><li value="2" class="p_Normal">В параметрах <code><b>elma365-addons.kube-prometheus-stack</b></code> и <code><b>elma365-addons.grafana</b></code> укажите требуемый <code><b>namespace</b></code> для сервиса мониторинга (например, <code><b>namespaceOverride: monitoring</b></code>), адрес, по которому будет доступен сервис мониторинга и включите дэшборды, изменив значение в параметре <code><b>elma365.global.dashboard.enabled</b></code> на <code><b>true</b></code>.</li><li value="3" class="p_Normal">Создайте <code><b>namespace</b></code> для сервиса мониторинга командой:</li></ol>
<p class="p_CodeExample" style="page-break-inside: avoid;"><span class="f_CodeExample">kubectl&nbsp;create&nbsp;namespace&nbsp;monitoring</span></p>
<ol style="list-style-type:upper-roman" start="4">
<li value="4" class="p_Normal">Выполните установку следующей командой (обратите внимание на параметр <code><b>--set global.elma365-addons.enabled=true</b></code>):</li></ol>
<p class="p_CodeExample" style="page-break-inside: avoid;"><span class="f_CodeExample">helm&nbsp;upgrade&nbsp;--install&nbsp;elma365-stack&nbsp;elma365/elma365-stack&nbsp;\</span><br />
<span class="f_CodeExample">&nbsp;-f&nbsp;values-elma365-stack.yaml&nbsp;\</span><br />
<span class="f_CodeExample">&nbsp;--set&nbsp;global.elma365-addons.enabled=</span><span class="f_CodeExample" style="font-weight: bold;">true</span><span class="f_CodeExample">&nbsp;\</span><br />
<span class="f_CodeExample">&nbsp;--timeout=30m&nbsp;--wait&nbsp;\</span><br />
<span class="f_CodeExample">&nbsp;&nbsp;[-n&nbsp;namespace]</span></p>
<h2 class="p_Heading2"><span class="f_Heading2">Установка Linkerd и автомасштабирование сервисов (опционально)</span></h2>
<p class="p_Normal">Linkerd — это выделенный уровень инфраструктуры, который помогает обрабатывать связь между сервисами, автоматически шифровать соединения, обрабатывать повторные запросы и тайм-ауты, использовать телеметрию (коэффициент успешности, задержки) и т. д.</p>
<ol style="list-style-type:upper-roman">
<li value="1" class="p_Normal">Сгенерируйте сертификаты с помощью <code><b>openssl</b></code>, выполнив команды ниже. Linkerd требует сертификат привязки доверия и сертификаты эмитента с соответствующим ключом для поддержки взаимных TLS-соединений между сервисами, для всех сертификатов требуется алгоритм<span style="font-weight: bold;"> ECDSA P-256</span>.</li></ol>
<p class="p_CodeExample" style="page-break-inside: avoid;"><span class="f_CodeExample">#&nbsp;Создать&nbsp;закрытый&nbsp;ключ&nbsp;CA</span><br />
<span class="f_CodeExample">openssl&nbsp;ecparam&nbsp;-name&nbsp;prime256v1&nbsp;-genkey&nbsp;-noout&nbsp;-out&nbsp;ca-</span><span class="f_CodeExample" style="font-weight: bold;">private</span><span class="f_CodeExample">.pem</span><br />
<span class="f_CodeExample">&nbsp;</span><br />
<span class="f_CodeExample">#&nbsp;Создать&nbsp;открытый&nbsp;ключ&nbsp;CA</span><br />
<span class="f_CodeExample">openssl&nbsp;ec&nbsp;-</span><span class="f_CodeExample" style="font-weight: bold;">in</span><span class="f_CodeExample">&nbsp;ca-</span><span class="f_CodeExample" style="font-weight: bold;">private</span><span class="f_CodeExample">.pem&nbsp;-pubout&nbsp;-out&nbsp;ca-</span><span class="f_CodeExample" style="font-weight: bold;">public</span><span class="f_CodeExample">.pem</span><br />
<span class="f_CodeExample">&nbsp;</span><br />
<span class="f_CodeExample">#&nbsp;Создать&nbsp;самоподписанный&nbsp;сертификат&nbsp;CA</span><br />
<span class="f_CodeExample">openssl&nbsp;req&nbsp;-x509&nbsp;-</span><span class="f_CodeExample" style="font-weight: bold;">new</span><span class="f_CodeExample">&nbsp;-key&nbsp;ca-</span><span class="f_CodeExample" style="font-weight: bold;">private</span><span class="f_CodeExample">.pem&nbsp;-days&nbsp;365&nbsp;\</span><br />
<span class="f_CodeExample">&nbsp;-out&nbsp;ca.crt&nbsp;-subj&nbsp;&quot;/CN=root.linkerd.cluster.local&quot;</span><br />
<span class="f_CodeExample">#&nbsp;Создать&nbsp;закрытый&nbsp;ключ&nbsp;эмитента</span><br />
<span class="f_CodeExample">openssl&nbsp;ecparam&nbsp;-name&nbsp;prime256v1&nbsp;-genkey&nbsp;-noout&nbsp;-out&nbsp;issuer-</span><span class="f_CodeExample" style="font-weight: bold;">private</span><span class="f_CodeExample">.pem</span><br />
<span class="f_CodeExample">&nbsp;</span><br />
<span class="f_CodeExample">#&nbsp;Создать&nbsp;открытый&nbsp;ключ&nbsp;эмитента</span><br />
<span class="f_CodeExample">openssl&nbsp;ec&nbsp;-</span><span class="f_CodeExample" style="font-weight: bold;">in</span><span class="f_CodeExample">&nbsp;issuer-</span><span class="f_CodeExample" style="font-weight: bold;">private</span><span class="f_CodeExample">.pem&nbsp;-pubout&nbsp;-out&nbsp;issuer-</span><span class="f_CodeExample" style="font-weight: bold;">public</span><span class="f_CodeExample">.pem</span><br />
<span class="f_CodeExample">&nbsp;</span><br />
<span class="f_CodeExample">#&nbsp;Создать&nbsp;запрос&nbsp;на&nbsp;подпись&nbsp;сертификата</span><br />
<span class="f_CodeExample">openssl&nbsp;req&nbsp;-</span><span class="f_CodeExample" style="font-weight: bold;">new</span><span class="f_CodeExample">&nbsp;-key&nbsp;issuer-</span><span class="f_CodeExample" style="font-weight: bold;">private</span><span class="f_CodeExample">.pem&nbsp;-out&nbsp;issuer.csr&nbsp;\</span><br />
<span class="f_CodeExample">&nbsp;-subj&nbsp;&quot;/CN=identity.linkerd.cluster.local&quot;&nbsp;\</span><br />
<span class="f_CodeExample">&nbsp;-addext&nbsp;basicConstraints=critical,CA:TRUE</span><br />
<span class="f_CodeExample">&nbsp;</span><br />
<span class="f_CodeExample">#&nbsp;Создать&nbsp;сертификат&nbsp;эмитента,&nbsp;подписав&nbsp;запрос</span><br />
<span class="f_CodeExample">openssl&nbsp;x509&nbsp;\</span><br />
<span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;-extfile&nbsp;/etc/ssl/openssl.cnf&nbsp;\</span><br />
<span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;-extensions&nbsp;v3_ca&nbsp;\</span><br />
<span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;-req&nbsp;\</span><br />
<span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;-</span><span class="f_CodeExample" style="font-weight: bold;">in</span><span class="f_CodeExample">&nbsp;issuer.csr&nbsp;\</span><br />
<span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;-days&nbsp;180&nbsp;\</span><br />
<span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;-CA&nbsp;ca.crt&nbsp;\</span><br />
<span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;-CAkey&nbsp;ca-</span><span class="f_CodeExample" style="font-weight: bold;">private</span><span class="f_CodeExample">.pem&nbsp;\</span><br />
<span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;-CAcreateserial&nbsp;\</span><br />
<span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;-extensions&nbsp;v3_ca&nbsp;\</span><br />
<span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;-out&nbsp;issuer.crt</span><br />
<span class="f_CodeExample">#&nbsp;Удалить&nbsp;запрос&nbsp;на&nbsp;подпись&nbsp;сертификата</span><br />
<span class="f_CodeExample">rm&nbsp;issuer.csr</span></p>
<ol style="list-style-type:upper-roman" start="2">
<li value="2" class="p_Normal">В файле <code><b>values-elma365-stack.yaml</b></code> отключите неиспользуемые компоненты, изменив значение в параметрах <code><b>global.kube-prometheus-stack.enabled</b></code>, <code><b>global.grafana.enabled</b></code>, <code><b>global.descheduler.enabled</b></code>, <code><b>global.node-local-dns.enabled</b></code> и <code><b>global.audit.enabled</b></code> на <code><b>false</b></code>, так как для их установки необходимы предварительные настройки.</li><li value="3" class="p_Normal">В параметрах <code><b>elma365-addons.linkerd2</b></code> укажите требуемый <code><b>namespace</b></code> для сервиса Linkerd (например, <code><b>namespace: linkerd</b></code>), содержимое сертификатов, ключа и срок действия сертификата <code><b>crtExpiry</b></code>. Обратите внимание, значение должно соответствовать дате истечения срока действия сертификата эмитента.</li></ol>
<p class="p_CodeExample" style="page-break-inside: avoid;"><span class="f_CodeExample">identityTrustAnchorsPEM:&nbsp;|</span><br />
<span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;-----BEGIN&nbsp;CERTIFICATE-----</span><br />
<span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;содержимое&nbsp;сертификата&nbsp;ca.crt</span><br />
<span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;-----END&nbsp;CERTIFICATE-----</span><br />
<span class="f_CodeExample">&nbsp;&nbsp;identity:</span><br />
<span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;issuer:</span><br />
<span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;crtExpiry:&nbsp;2023-03-30T05:28:39Z</span><br />
<span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tls:</span><br />
<span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;crtPEM:&nbsp;|</span><br />
<span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-----BEGIN&nbsp;CERTIFICATE-----</span><br />
<span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;содержимое&nbsp;сертификата&nbsp;issuer.crt</span><br />
<span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-----END&nbsp;CERTIFICATE-----</span><br />
<span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;keyPEM:&nbsp;|</span><br />
<span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-----BEGIN&nbsp;EC&nbsp;PRIVATE&nbsp;KEY-----</span><br />
<span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;содержимое&nbsp;сертификата&nbsp;issuer-</span><span class="f_CodeExample" style="font-weight: bold;">private</span><span class="f_CodeExample">.pem</span><br />
<span class="f_CodeExample">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-----END&nbsp;EC&nbsp;PRIVATE&nbsp;KEY-----</span></p>
<ol style="list-style-type:upper-roman" start="4">
<li value="4" class="p_Normal">Включите автомасштабирование сервисов, изменив значение в параметре <code><b>elma365.global.autoscaling.enabled</b></code> на <code><b>true</b></code>.</li><li value="5" class="p_Normal">Выполните установку следующей командой (обратите внимание на параметр <code><b>--set global.elma365-addons.enabled=true</b></code>):</li></ol>
<p class="p_CodeExample" style="page-break-inside: avoid;"><span class="f_CodeExample">helm&nbsp;upgrade&nbsp;--install&nbsp;elma365-stack&nbsp;elma365/elma365-stack&nbsp;\</span><br />
<span class="f_CodeExample">&nbsp;-f&nbsp;values-elma365-stack.yaml&nbsp;--set&nbsp;global.elma365-addons.enabled=</span><span class="f_CodeExample" style="font-weight: bold;">true</span><span class="f_CodeExample">&nbsp;\</span><br />
<span class="f_CodeExample">&nbsp;--timeout=30m&nbsp;--wait&nbsp;[-n&nbsp;namespace]</span></p>
<ol style="list-style-type:upper-roman" start="6">
<li value="6" class="p_Normal">Добавьте аннотацию на <code><b>namespace</b></code> с приложением ELMA365 для автоматической инъекции контейнеров Linkerd-proxy в сервисы ELMA365 командой:</li></ol>
<p class="p_CodeExample" style="page-break-inside: avoid;"><span class="f_CodeExample">kubectl&nbsp;annotate&nbsp;namespace&nbsp;</span><span class="f_CodeExample" style="font-weight: bold;">default</span><span class="f_CodeExample">&nbsp;linkerd.io/inject=enabled</span></p>
<ol style="list-style-type:upper-roman" start="6">
<li value="7" class="p_Normal">Перезапустите все сервисы командой:</li></ol>
<p class="p_CodeExample" style="page-break-inside: avoid;"><span class="f_CodeExample">kubectl&nbsp;rollout&nbsp;restart&nbsp;deploy&nbsp;[-n&nbsp;namespace]&nbsp;&amp;&amp;&nbsp;kubectl&nbsp;rollout&nbsp;restart&nbsp;ds&nbsp;[-n&nbsp;namespace]</span></p>
<h2 class="p_Heading2"><span class="f_Heading2">Установка NodeLocal DNS Cache (опционально)</span></h2>
<p class="p_Normal">Установка NodeLocal DNS Cache позволяет снизить нагрузку по DNS-запросам в кластере Kubernetes и повысить стабильность преобразования DNS-имён. Это позволит избежать правил DNAT, connection tracking и ограничений по количеству соединений.</p>
<ol style="list-style-type:upper-roman">
<li value="1" class="p_Normal">Получите IP-адрес сервиса <span style="font-weight: bold;">kube-dns</span>:</li></ol>
<p class="p_CodeExample" style="page-break-inside: avoid;"><span class="f_CodeExample">kubectl&nbsp;get&nbsp;svc&nbsp;kube-dns&nbsp;-n&nbsp;kube-system&nbsp;-o&nbsp;jsonpath={.spec.clusterIP}</span></p>
<ol style="list-style-type:upper-roman" start="2">
<li value="2" class="p_Normal">В файле <code><b>values-elma365-stack.yaml</b></code> отключите неиспользуемые компоненты, изменив значение в параметрах <code><b>global.kube-prometheus-stack.enabled</b></code>, <code><b>global.grafana.enabled</b></code>, <code><b>global.descheduler.enabled</b></code>, <code><b>global.linkerd2.enabled</b></code> и <code><b>global.audit.enabled</b></code> на <code><b>false</b></code>, так как для их установки необходимы предварительные настройки.</li><li value="3" class="p_Normal">В параметрах <code><b>elma365-addons.node-local-dns</b></code> укажите следующие параметры:</li></ol>
<ul style="list-style-type:disc">
<li class="p_Normal"><code><b>pillar_dns_domain</b></code> — домен кластера;</li><li class="p_Normal"><code><b>pillar_dns_server</b></code> — IP-адрес сервиса <span style="font-weight: bold;">kube-dns</span>;</li><li class="p_Normal"><code><b>pillar_local_dns</b></code> — локальный IP-адрес для NodeLocal DNS Cache.</li></ul>
<ol style="list-style-type:upper-roman" start="4">
<li value="4" class="p_Normal">Выполните установку командой (обратите внимание на параметр <code><b>--set global.elma365-addons.enabled=true</b></code>):</li></ol>
<p class="p_CodeExample" style="page-break-inside: avoid;"><span class="f_CodeExample">helm&nbsp;upgrade&nbsp;--install&nbsp;elma365-stack&nbsp;elma365/elma365-stack&nbsp;\</span><br />
<span class="f_CodeExample">&nbsp;-f&nbsp;values-elma365-stack.yaml&nbsp;--set&nbsp;global.elma365-addons.enabled=</span><span class="f_CodeExample" style="font-weight: bold;">true</span><span class="f_CodeExample">&nbsp;\</span><br />
<span class="f_CodeExample">&nbsp;--timeout=30m&nbsp;--wait&nbsp;[-n&nbsp;namespace]</span></p>
<h2 class="p_Heading2"><span class="f_Heading2">Установка Kyverno (опционально)</span></h2>
<p class="p_Normal"><span style="font-weight: bold;">Kyverno</span> позволяет управлять специфическими конфигурациями среды независимо от конфигураций ресурсов, применять передовые методы настройки для своих кластеров, в частности, путём блокировки или изменения запросов API.</p>
<h3 class="p_Heading3"><span class="f_Heading3">Политика добавления пользовательских сертификатов CA во все контейнеры</span></h3>
<p class="p_Normal">В некоторых случаях требуется доверять пользовательским сертификатам CA. Kyverno позволяет автоматически монтировать их в контейнеры. Политика добавляет том, содержащий сертификат, ко всем контейнерам с меткой <span style="font-weight: bold;">tier=elma365</span>.</p>
<ol style="list-style-type:upper-roman">
<li value="1" class="p_Normal">Создайте <span style="font-weight: bold;">ConfigMap</span> с сертификатом корневого CA.</li></ol>
<p class="p_CodeExample" style="page-break-inside: avoid;"><span class="f_CodeExample">kubectl&nbsp;create&nbsp;configmap&nbsp;elma365-onpremise-ca&nbsp;--from-file=/etc/ssl/certs/rootCA.pem&nbsp;&nbsp;[-n&nbsp;namespace]</span></p>
<ol style="list-style-type:upper-roman">
<li value="2" class="p_Normal">В файле <code><b>values-elma365-stack.yaml</b></code> включите Kyverno, изменив значение параметра <code><b>global.kyverno.enabled</b></code> на <code><b>true</b></code>. Затем отключите неиспользуемые компоненты, изменив значение у дополнения в параметре <code><b>global</b></code> на <code><b>false</b></code>, так как для их установки необходимы предварительные настройки.</li><li value="3" class="p_Normal"><span style="color: #212529; background-color: #ffffff;">В параметрах&nbsp;</span><code><b>elma365-addons.kyverno</b></code><span style="color: #212529; background-color: #ffffff;">&nbsp;укажите требуемый&nbsp;</span><code><b>namespace</b></code><span style="color: #212529; background-color: #ffffff;">&nbsp;для сервиса Kyverno</span>,<span style="font-weight: bold; color: #212529; background-color: #ffffff;">&nbsp;</span><span style="color: #212529; background-color: #ffffff;">например,&nbsp;</span><code><b>namespace: kyverno</b></code><span style="color: #212529; background-color: #ffffff;">. Затем включите политику добавления сертификатов, изменив значение в параметре&nbsp;</span><code><b>elma365-addons.kyverno.injectСerts.enabled</b></code><span style="color: #212529; background-color: #ffffff;">&nbsp;на&nbsp;</span><code><b>true</b></code><span style="color: #212529; background-color: #ffffff;">, укажите имя&nbsp;</span><span style="font-weight: bold; color: #212529; background-color: #ffffff;">ConfigMap</span><span style="color: #212529; background-color: #ffffff;">&nbsp;с сертификатом корневого CA. В параметре&nbsp;</span><code><b>injectNamespace</b></code><span style="color: #212529; background-color: #ffffff;">&nbsp;укажите список&nbsp;</span><code><b>namespace</b></code><span style="color: #212529; background-color: #ffffff;">, в которых будет применена политика добавления сертификатов.&nbsp;</span></li><li value="4" class="p_Normal">Создайте <code><b>namespace</b></code> для сервиса Kyverno командой:</li></ol>
<p class="p_CodeExample" style="page-break-inside: avoid;"><span class="f_CodeExample">kubectl&nbsp;create&nbsp;namespace&nbsp;kyverno</span></p>
<ol style="list-style-type:upper-roman">
<li value="5" class="p_Normal">Выполните установку следующей командой (обратите внимание на параметр <code><b>--set global.elma365-addons.enabled=true</b></code>:</li></ol>
<p class="p_CodeExample" style="page-break-inside: avoid;"><span class="f_CodeExample">helm&nbsp;upgrade&nbsp;--install&nbsp;elma365-stack&nbsp;elma365/elma365-stack&nbsp;\</span><br />
<span class="f_CodeExample">-f&nbsp;values-elma365-stack.yaml&nbsp;--set&nbsp;global.elma365-addons.enabled=</span><span class="f_CodeExample" style="font-weight: bold;">true</span><span class="f_CodeExample">&nbsp;\</span><br />
<span class="f_CodeExample">--timeout=30m&nbsp;--wait&nbsp;[-n&nbsp;namespace]</span></p>
<ol style="list-style-type:upper-roman">
<li value="6" class="p_Normal">Перезапустите все сервисы командой:</li></ol>
<p class="p_CodeExample" style="page-break-inside: avoid;"><span class="f_CodeExample">kubectl&nbsp;rollout&nbsp;restart&nbsp;deploy&nbsp;[-n&nbsp;namespace]&nbsp;&amp;&amp;&nbsp;kubectl&nbsp;rollout&nbsp;restart&nbsp;ds&nbsp;[-n&nbsp;namespace]</span></p>
<h2 class="p_Heading2"><span class="f_Heading2">Обновление версии ELMA365</span></h2>
<ol style="list-style-type:upper-roman">
<li value="1" class="p_Normal">Обновите список чартов в репозитории, выполнив команду:</li></ol>
<p class="p_CodeExample" style="page-break-inside: avoid;"><span class="f_CodeExample">helm&nbsp;repo&nbsp;update</span></p>
<ol style="list-style-type:upper-roman" start="2">
<li value="2" class="p_Normal">Используйте файл <code><b>values-elma365-stack.yaml</b></code>, сохранённый на этапе установки, а затем выполните команду:</li></ol>
<p class="p_CodeExample" style="page-break-inside: avoid;"><span class="f_CodeExample">helm&nbsp;upgrade&nbsp;--install&nbsp;elma365-stack&nbsp;elma365/elma365-stack&nbsp;-f&nbsp;values-elma365-stack.yaml&nbsp;--timeout=30m&nbsp;--wait&nbsp;[-n&nbsp;namespace]</span></p>
<p class="p_Normal">В случае изменения строк подключения (сonnection strings) к БД при обновлении приложения перезапустите все сервисы командой:</p>
<p class="p_CodeExample" style="page-break-inside: avoid;"><span class="f_CodeExample">kubectl&nbsp;default&nbsp;rollout&nbsp;restart&nbsp;deploy&nbsp;[-n&nbsp;namespace]&nbsp;&amp;&amp;&nbsp;kubectl&nbsp;default&nbsp;rollout&nbsp;restart&nbsp;ds&nbsp;[-n&nbsp;namespace]</span></p>
<h2 class="p_Heading2"><span class="f_Heading2">Удаление чарта elma365</span></h2>
<p class="p_Normal">Для удаления пакета ELMA365 посмотрите список установленных релизов, а затем выполните команду удаления:</p>
<p class="p_CodeExample" style="page-break-inside: avoid;"><span class="f_CodeExample">helm&nbsp;list&nbsp;[-n&nbsp;namespace]</span><br />
<span class="f_CodeExample">helm&nbsp;uninstall&nbsp;elma365-stack&nbsp;[-n&nbsp;namespace]&nbsp;</span></p>
<h2 class="p_Heading2"><span class="f_Heading2">Параметры чарта elma365-stack</span></h2>
<p class="p_Normal">&nbsp;</p>
<div style="text-align: left; text-indent: 0; padding: 0 0 0 0; margin: 0 0 0 0;"><table style="width:100%; border:none; border-spacing:0;">
<tr>
<td style="vertical-align:top; width:258px; padding:0; border:none"><p class="p_Normal"><span style="font-weight: bold;">Имя</span></p>
</td>
<td style="vertical-align:top; width:831px; padding:0; border:none"><p class="p_Normal"><span style="font-weight: bold;">Описание</span></p>
</td>
<td style="vertical-align:top; width:98px; padding:0; border:none"><p class="p_Normal"><span style="font-weight: bold;">Значение по умолчанию</span></p>
</td>
</tr>
<tr>
<td colspan="3"  style="vertical-align:top; width:1187px; padding:0; border:none"><p class="p_Normal"><span style="font-weight: bold;">Глобальные параметры </span></p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:258px; padding:0; border:none"><p class="p_Normal"><code><b>global.elma365.enabled</b></code></p>
</td>
<td style="vertical-align:top; width:831px; padding:0; border:none"><p class="p_Normal">Включить установку приложения ELMA365</p>
</td>
<td style="vertical-align:top; width:98px; padding:0; border:none"><p class="p_Normal"><code><b>true</b></code></p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:258px; padding:0; border:none"><p class="p_Normal"><code><b>global.elma365-dbs.enabled</b></code></p>
</td>
<td style="vertical-align:top; width:831px; padding:0; border:none"><p class="p_Normal">Включить установку баз данных</p>
</td>
<td style="vertical-align:top; width:98px; padding:0; border:none"><p class="p_Normal"><code><b>true</b></code></p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:258px; padding:0; border:none"><p class="p_Normal"><code><b>global.postgresql.enabled</b></code></p>
</td>
<td style="vertical-align:top; width:831px; padding:0; border:none"><p class="p_Normal">Включить PostgreSQL в установку баз данных</p>
</td>
<td style="vertical-align:top; width:98px; padding:0; border:none"><p class="p_Normal"><code><b>true</b></code></p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:258px; padding:0; border:none"><p class="p_Normal"><code><b>global.mongodb.enabled</b></code></p>
</td>
<td style="vertical-align:top; width:831px; padding:0; border:none"><p class="p_Normal">Включить MongoDB в установку баз данных</p>
</td>
<td style="vertical-align:top; width:98px; padding:0; border:none"><p class="p_Normal"><code><b>true</b></code></p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:258px; padding:0; border:none"><p class="p_Normal"><code><b>global.redis.enabled</b></code></p>
</td>
<td style="vertical-align:top; width:831px; padding:0; border:none"><p class="p_Normal">Включить Redis в установку баз данных</p>
</td>
<td style="vertical-align:top; width:98px; padding:0; border:none"><p class="p_Normal"><code><b>true</b></code></p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:258px; padding:0; border:none"><p class="p_Normal"><code><b>global.rabbitmq.enabled</b></code></p>
</td>
<td style="vertical-align:top; width:831px; padding:0; border:none"><p class="p_Normal">Включить RabbitMQ в установку баз данных</p>
</td>
<td style="vertical-align:top; width:98px; padding:0; border:none"><p class="p_Normal"><code><b>true</b></code></p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:258px; padding:0; border:none"><p class="p_Normal"><code><b>global.minio.</b></code></p>
</td>
<td style="vertical-align:top; width:831px; padding:0; border:none"><p class="p_Normal">Включить MinIO для S3 хранилища в установку баз данных</p>
</td>
<td style="vertical-align:top; width:98px; padding:0; border:none"><p class="p_Normal"><code><b>true</b></code></p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:258px; padding:0; border:none"><p class="p_Normal"><code><b>global.elasticsearch.enabled</b></code></p>
</td>
<td style="vertical-align:top; width:831px; padding:0; border:none"><p class="p_Normal">Включить Elasticsearch в установку баз данных (включается для ELMA Bot)</p>
</td>
<td style="vertical-align:top; width:98px; padding:0; border:none"><p class="p_Normal"><code><b>false</b></code></p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:258px; padding:0; border:none"><p class="p_Normal"><code><b>global.elma365-addons.enabled</b></code></p>
</td>
<td style="vertical-align:top; width:831px; padding:0; border:none"><p class="p_Normal">Включить установку дополнений для ELMA365</p>
</td>
<td style="vertical-align:top; width:98px; padding:0; border:none"><p class="p_Normal"><code><b>false</b></code></p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:258px; padding:0; border:none"><p class="p_Normal"><code><b>global.kube-prometheus-stack.enabled</b></code></p>
</td>
<td style="vertical-align:top; width:831px; padding:0; border:none"><p class="p_Normal">Включить Prometheus в установку дополнений для ELMA365 (перед установкой необходимо создать <code><b>namespace monitoring</b></code>)</p>
</td>
<td style="vertical-align:top; width:98px; padding:0; border:none"><p class="p_Normal"><code><b>true</b></code></p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:258px; padding:0; border:none"><p class="p_Normal"><code><b>global.grafana.enabled</b></code></p>
</td>
<td style="vertical-align:top; width:831px; padding:0; border:none"><p class="p_Normal">Включить Grafana в установку дополнений для ELMA365</p>
</td>
<td style="vertical-align:top; width:98px; padding:0; border:none"><p class="p_Normal"><code><b>true</b></code></p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:258px; padding:0; border:none"><p class="p_Normal"><code><b>global.linkerd2.enabled</b></code></p>
</td>
<td style="vertical-align:top; width:831px; padding:0; border:none"><p class="p_Normal">Включить Linkerd в установку дополнений для ELMA365</p>
</td>
<td style="vertical-align:top; width:98px; padding:0; border:none"><p class="p_Normal"><code><b>true</b></code></p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:258px; padding:0; border:none"><p class="p_Normal"><code><b>global.descheduler.enabled</b></code></p>
</td>
<td style="vertical-align:top; width:831px; padding:0; border:none"><p class="p_Normal">Включить Descheduler в установку дополнений для ELMA365 (необходимо не менее 3 узлов в кластере)</p>
</td>
<td style="vertical-align:top; width:98px; padding:0; border:none"><p class="p_Normal"><code><b>false</b></code></p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:258px; padding:0; border:none"><p class="p_Normal"><code><b>global.node-local-dns.enabled</b></code></p>
</td>
<td style="vertical-align:top; width:831px; padding:0; border:none"><p class="p_Normal">Включить NodeLocal DNS Cache в установку дополнений для ELMA365</p>
</td>
<td style="vertical-align:top; width:98px; padding:0; border:none"><p class="p_Normal"><code><b>true</b></code></p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:258px; padding:0; border:none"><p class="p_Normal"><code><b>global.audit.enabled</b></code></p>
</td>
<td style="vertical-align:top; width:831px; padding:0; border:none"><p class="p_Normal">Включить сервис <span style="font-weight: bold;">Аудит безопасности</span> в установку дополнений для ELMA365</p>
</td>
<td style="vertical-align:top; width:98px; padding:0; border:none"><p class="p_Normal"><code><b>true</b></code></p>
</td>
</tr>
<tr>
<td colspan="3"  style="vertical-align:top; width:1187px; padding:0; border:none"><p class="p_Normal"><span style="font-weight: bold;">Глобальные параметры ELMA365 </span></p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:258px; padding:0; border:none"><p class="p_Normal"><code><b>elma365.global.host</b></code></p>
</td>
<td style="vertical-align:top; width:831px; padding:0; border:none"><p class="p_Normal">Домен (FQDN) или IP-адрес, по которому будет доступна система</p>
</td>
<td style="vertical-align:top; width:98px; padding:0; border:none"><p class="p_Normal"><code><b>example.ru</b></code></p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:258px; padding:0; border:none"><p class="p_Normal"><code><b>elma365.global.ingress.hostEnabled</b></code></p>
</td>
<td style="vertical-align:top; width:831px; padding:0; border:none"><p class="p_Normal">Включение <code><b>host</b></code> в ingress (значение берётся из <code><b>global.host</b></code>).</p>
</td>
<td style="vertical-align:top; width:98px; padding:0; border:none"><p class="p_Normal"><code><b>false</b></code></p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:258px; padding:0; border:none"><p class="p_Normal"><code><b>elma365.global.ingress.onpremiseTls.enabled</b></code></p>
</td>
<td style="vertical-align:top; width:831px; padding:0; border:none"><p class="p_Normal">Включение https</p>
</td>
<td style="vertical-align:top; width:98px; padding:0; border:none"><p class="p_Normal"><code><b>false</b></code></p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:258px; padding:0; border:none"><p class="p_Normal"><code><b>elma365.global.ingress.onpremiseTls.secret</b></code></p>
</td>
<td style="vertical-align:top; width:831px; padding:0; border:none"><p class="p_Normal">Имя секрета с сертификатами для работы https</p>
</td>
<td style="vertical-align:top; width:98px; padding:0; border:none"><p class="p_Normal"><code><b>"elma365-onpremise-tls"</b></code></p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:258px; padding:0; border:none"><p class="p_Normal"><code><b>elma365.global.ingress.onpremiseTls.enabledCA</b></code></p>
</td>
<td style="vertical-align:top; width:831px; padding:0; border:none"><p class="p_Normal">Включение сертификата корневого CA для работы https с самоподписанным сертификатом</p>
</td>
<td style="vertical-align:top; width:98px; padding:0; border:none"><p class="p_Normal"><code><b>false</b></code></p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:258px; padding:0; border:none"><p class="p_Normal"><code><b>elma365.global.ingress.onpremiseTls.configCA</b></code></p>
</td>
<td style="vertical-align:top; width:831px; padding:0; border:none"><p class="p_Normal">Имя конфигмапы с сертификатом корневого CA для работы https с самоподписанным сертификатом</p>
</td>
<td style="vertical-align:top; width:98px; padding:0; border:none"><p class="p_Normal"><code><b>"elma365-onpremise-ca"</b></code></p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:258px; padding:0; border:none"><p class="p_Normal"><code><b>elma365.global.ingress.annotations</b></code></p>
</td>
<td style="vertical-align:top; width:831px; padding:0; border:none"><p class="p_Normal">Аннотации для ingress</p>
</td>
<td style="vertical-align:top; width:98px; padding:0; border:none"><p class="p_Normal"><code><b>{"kubernetes.io/ingress.class": "nginx"}</b></code></p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:258px; padding:0; border:none"><p class="p_Normal"><code><b>elma365.global.autoscaling.enabled</b></code></p>
</td>
<td style="vertical-align:top; width:831px; padding:0; border:none"><p class="p_Normal">Включение автомасштабирования сервисов</p>
</td>
<td style="vertical-align:top; width:98px; padding:0; border:none"><p class="p_Normal"><code><b>true</b></code></p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:258px; padding:0; border:none"><p class="p_Normal"><code><b>elma365.global.autoscaling.minReplicas</b></code></p>
</td>
<td style="vertical-align:top; width:831px; padding:0; border:none"><p class="p_Normal">Минимальное количество реплик</p>
</td>
<td style="vertical-align:top; width:98px; padding:0; border:none"><p class="p_Normal">1</p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:258px; padding:0; border:none"><p class="p_Normal"><code><b>elma365.global.autoscaling.maxReplicas</b></code></p>
</td>
<td style="vertical-align:top; width:831px; padding:0; border:none"><p class="p_Normal">Максимальное количество реплик</p>
</td>
<td style="vertical-align:top; width:98px; padding:0; border:none"><p class="p_Normal">9</p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:258px; padding:0; border:none"><p class="p_Normal"><code><b>elma365.global.dashboard.enabled</b></code></p>
</td>
<td style="vertical-align:top; width:831px; padding:0; border:none"><p class="p_Normal">Включение дэшбордов для Grafana</p>
</td>
<td style="vertical-align:top; width:98px; padding:0; border:none"><p class="p_Normal"><code><b>false</b></code></p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:258px; padding:0; border:none"><p class="p_Normal"><code><b>elma365.global.image.repository</b></code></p>
</td>
<td style="vertical-align:top; width:831px; padding:0; border:none"><p class="p_Normal">Адрес для registry </p>
</td>
<td style="vertical-align:top; width:98px; padding:0; border:none"><p class="p_Normal"><code><b>hub.elma365.tech</b></code></p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:258px; padding:0; border:none"><p class="p_Normal"><code><b>elma365.global.image.dockerRegistry</b></code></p>
</td>
<td style="vertical-align:top; width:831px; padding:0; border:none"><p class="p_Normal">Адрес для registry</p>
</td>
<td style="vertical-align:top; width:98px; padding:0; border:none"><p class="p_Normal">&quot; &quot;</p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:258px; padding:0; border:none"><p class="p_Normal"><code><b>elma365.global.image.pullSecret</b></code></p>
</td>
<td style="vertical-align:top; width:831px; padding:0; border:none"><p class="p_Normal">Секрет с правами доступа к приватному registry, должен быть создан вручную, зашифрованный в Base64</p>
</td>
<td style="vertical-align:top; width:98px; padding:0; border:none"><p class="p_Normal"><code><b>[yandexsecret]</b></code></p>
</td>
</tr>
<tr>
<td colspan="3"  style="vertical-align:top; width:1187px; padding:0; border:none"><p class="p_Normal"><span style="font-weight: bold;">Дополнительные параметры </span></p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:258px; padding:0; border:none"><p class="p_Normal"><code><b>elma365.global.postgres.maxIdleConns</b></code></p>
</td>
<td style="vertical-align:top; width:831px; padding:0; border:none"><p class="p_Normal">Максимальное количество подключений к главному узлу PostgreSQL в пуле незанятых подключений</p>
</td>
<td style="vertical-align:top; width:98px; padding:0; border:none"><p class="p_Normal">50</p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:258px; padding:0; border:none"><p class="p_Normal"><code><b>elma365.global.postgres.maxOpenConns</b></code></p>
</td>
<td style="vertical-align:top; width:831px; padding:0; border:none"><p class="p_Normal">Максимальное количество открытых подключений к главному узлу PostgreSQL из пула</p>
</td>
<td style="vertical-align:top; width:98px; padding:0; border:none"><p class="p_Normal">150</p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:258px; padding:0; border:none"><p class="p_Normal"><code><b>elma365.global.postgres.maxConnLife</b></code></p>
</td>
<td style="vertical-align:top; width:831px; padding:0; border:none"><p class="p_Normal">Максимальное время жизни подключения к главному узлу PostgreSQL из пула</p>
</td>
<td style="vertical-align:top; width:98px; padding:0; border:none"><p class="p_Normal">1m</p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:258px; padding:0; border:none"><p class="p_Normal"><code><b>elma365.global.postgres.poolMaxIdleConns</b></code></p>
</td>
<td style="vertical-align:top; width:831px; padding:0; border:none"><p class="p_Normal">Максимальное количество подключений к репликам PostgreSQL в пуле незанятых подключений</p>
</td>
<td style="vertical-align:top; width:98px; padding:0; border:none"><p class="p_Normal">50</p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:258px; padding:0; border:none"><p class="p_Normal"><code><b>elma365.global.postgres.poolMaxOpenConns</b></code></p>
</td>
<td style="vertical-align:top; width:831px; padding:0; border:none"><p class="p_Normal">Максимальное количество открытых подключений к репликам PostgreSQL из пула</p>
</td>
<td style="vertical-align:top; width:98px; padding:0; border:none"><p class="p_Normal">150</p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:258px; padding:0; border:none"><p class="p_Normal"><code><b>elma365.global.postgres.poolConnMaxLifetime</b></code></p>
</td>
<td style="vertical-align:top; width:831px; padding:0; border:none"><p class="p_Normal">Максимальное время жизни подключения к репликам PostgreSQL из пула</p>
</td>
<td style="vertical-align:top; width:98px; padding:0; border:none"><p class="p_Normal">5m</p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:258px; padding:0; border:none"><p class="p_Normal"><code><b>elma365.global.maxGrpcMessageSize</b></code></p>
</td>
<td style="vertical-align:top; width:831px; padding:0; border:none"><p class="p_Normal">Максимальный размер ответов</p>
</td>
<td style="vertical-align:top; width:98px; padding:0; border:none"><p class="p_Normal">8388608</p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:258px; padding:0; border:none"><p class="p_Normal"><code><b>elma365.global.maxGrpcBackoffDelay</b></code></p>
</td>
<td style="vertical-align:top; width:831px; padding:0; border:none"><p class="p_Normal">Максимальная задержка между попытками установки GRPC-соединения</p>
</td>
<td style="vertical-align:top; width:98px; padding:0; border:none"><p class="p_Normal">2s</p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:258px; padding:0; border:none"><p class="p_Normal"><code><b>elma365.global.activeDeadlineSeconds</b></code></p>
</td>
<td style="vertical-align:top; width:831px; padding:0; border:none"><p class="p_Normal">Количество секунд, которое отводится всему Job на выполнение</p>
</td>
<td style="vertical-align:top; width:98px; padding:0; border:none"><p class="p_Normal">3000</p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:258px; padding:0; border:none"><p class="p_Normal"><code><b>elma365.global.curlCreateCompanyMaxTime</b></code></p>
</td>
<td style="vertical-align:top; width:831px; padding:0; border:none"><p class="p_Normal">Количество секунд, которое отводится Job на выполнение создания компании</p>
</td>
<td style="vertical-align:top; width:98px; padding:0; border:none"><p class="p_Normal">1800</p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:258px; padding:0; border:none"><p class="p_Normal"><code><b>elma365.global.curlMigrationsMaxTime</b></code></p>
</td>
<td style="vertical-align:top; width:831px; padding:0; border:none"><p class="p_Normal">Количество секунд, которое отводится Job на выполнение миграции</p>
</td>
<td style="vertical-align:top; width:98px; padding:0; border:none"><p class="p_Normal">3000</p>
</td>
</tr>
<tr>
<td colspan="3"  style="vertical-align:top; width:1187px; padding:0; border:none"><p class="p_Normal"><span style="font-weight: bold;">Общие параметры </span></p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:258px; padding:0; border:none"><p class="p_Normal"><code><b>elma365.debug</b></code></p>
</td>
<td style="vertical-align:top; width:831px; padding:0; border:none"><p class="p_Normal">Включить режим отладки платформы</p>
</td>
<td style="vertical-align:top; width:98px; padding:0; border:none"><p class="p_Normal"><code><b>false</b></code></p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:258px; padding:0; border:none"><p class="p_Normal"><code><b>elma365.bootstrapCompany.email</b></code></p>
</td>
<td style="vertical-align:top; width:831px; padding:0; border:none"><p class="p_Normal">Электронная почта администратора</p>
</td>
<td style="vertical-align:top; width:98px; padding:0; border:none"><p class="p_Normal"><code><b>admin@mail.com</b></code></p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:258px; padding:0; border:none"><p class="p_Normal"><code><b>elma365.bootstrapCompany.password</b></code></p>
</td>
<td style="vertical-align:top; width:831px; padding:0; border:none"><p class="p_Normal">Пароль администратора</p>
</td>
<td style="vertical-align:top; width:98px; padding:0; border:none"><p class="p_Normal">test</p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:258px; padding:0; border:none"><p class="p_Normal"><code><b>elma365.bootstrapCompany.locale</b></code></p>
</td>
<td style="vertical-align:top; width:831px; padding:0; border:none"><p class="p_Normal">Язык установленной системы, возможные варианты: ru-RU, en-US, sk-SK</p>
</td>
<td style="vertical-align:top; width:98px; padding:0; border:none"><p class="p_Normal">ru-RU</p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:258px; padding:0; border:none"><p class="p_Normal"><code><b>elma365.language.default</b></code></p>
</td>
<td style="vertical-align:top; width:831px; padding:0; border:none"><p class="p_Normal">Язык установленной системы, возможные варианты: ru-RU, en-US, sk-SK</p>
</td>
<td style="vertical-align:top; width:98px; padding:0; border:none"><p class="p_Normal">ru-RU</p>
</td>
</tr>
<tr>
<td colspan="3"  style="vertical-align:top; width:1187px; padding:0; border:none"><p class="p_Normal"><span style="font-weight: bold;">Строки подключения (сonnection strings) для подключения к БД</span></p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:258px; padding:0; border:none"><p class="p_Normal"><code><b>elma365.db.psqlUrl</b></code></p>
</td>
<td style="vertical-align:top; width:831px; padding:0; border:none"><p class="p_Normal">Строка подключения к БД PostgreSQL</p>
</td>
<td style="vertical-align:middle; width:98px; padding:0; border:none"><p class="p_Normal"><code><b>"db.psqlUrl: 'postgres://
postgres:pgpassword@
postgres.default.svc.cluster.
local:5432/elma365?sslmode=disable"</b></code> </p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:258px; padding:0; border:none"><p class="p_Normal"><code><b>elma365.db.psqlSecret</b></code></p>
</td>
<td style="vertical-align:top; width:831px; padding:0; border:none"><p class="p_Normal">Имя секрета со строкой подключения к БД PostgreSQL, зашифрованной в Base64 (ключ PSQL_URL)</p>
</td>
<td style="vertical-align:top; width:98px; padding:0; border:none"><p class="p_Normal">&quot; &quot;</p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:258px; padding:0; border:none"><p class="p_Normal"><code><b>elma365.db.roPsqlUrl</b></code></p>
</td>
<td style="vertical-align:top; width:831px; padding:0; border:none"><p class="p_Normal">Строка подключения к БД PostgreSQL только для чтения</p>
</td>
<td style="vertical-align:top; width:98px; padding:0; border:none"><p class="p_Normal">&quot; &quot;</p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:258px; padding:0; border:none"><p class="p_Normal"><code><b>elma365.db.roPsqlSecret</b></code></p>
</td>
<td style="vertical-align:top; width:831px; padding:0; border:none"><p class="p_Normal">Имя секрета со строкой подключения к БД PostgreSQL только для чтения, зашифрованной в Base64 (ключ RO_POSTGRES_URL)</p>
</td>
<td style="vertical-align:top; width:98px; padding:0; border:none"><p class="p_Normal">&quot; &quot;</p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:258px; padding:0; border:none"><p class="p_Normal"><code><b>elma365.db.mongoUrl</b></code></p>
</td>
<td style="vertical-align:top; width:831px; padding:0; border:none"><p class="p_Normal">Строка подключения к БД MongoDB для приложения</p>
</td>
<td style="vertical-align:middle; width:98px; padding:0; border:none"><p class="p_Normal"><code><b>"mongodb://elma365:mongopassword@
mongo.default.svc.cluster.local:
27017/elma365?ssl=false&replicaSet=
rs0&readPreference=
secondaryPreferred"</b></code></p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:258px; padding:0; border:none"><p class="p_Normal"><code><b>elma365.db.mongoSecret</b></code></p>
</td>
<td style="vertical-align:top; width:831px; padding:0; border:none"><p class="p_Normal">Имя секрета со строкой подключения к БД MongoDB для приложения, зашифрованной в Base64 (ключ MONGO_URL)</p>
</td>
<td style="vertical-align:top; width:98px; padding:0; border:none"><p class="p_Normal">&quot; &quot;</p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:258px; height:83px; padding:0; border:none"><p class="p_Normal"><code><b>elma365.db.vahterMongoUrl</b></code></p>
</td>
<td style="vertical-align:top; width:831px; height:83px; padding:0; border:none"><p class="p_Normal">Строка подключения к БД MongoDB для сервера авторизации</p>
</td>
<td style="vertical-align:middle; width:98px; height:83px; padding:0; border:none"><p class="p_Normal"><code><b>"mongodb://elma365:mongopassword@
mongo.default.svc.cluster.local:
27017/elma365?ssl=false&replicaSet=
rs0&readPreference=
secondaryPreferred"</b></code></p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:258px; padding:0; border:none"><p class="p_Normal"><code><b>elma365.db.vahterMongoSecret</b></code></p>
</td>
<td style="vertical-align:top; width:831px; padding:0; border:none"><p class="p_Normal">Имя секрета со строкой подключения к БД MongoDB для сервера авторизации</p>
</td>
<td style="vertical-align:top; width:98px; padding:0; border:none"><p class="p_Normal">&quot; &quot;</p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:258px; padding:0; border:none"><p class="p_Normal"><code><b>elma365.db.redisUrl</b></code></p>
</td>
<td style="vertical-align:top; width:831px; padding:0; border:none"><p class="p_Normal">Строка подключения к Redis</p>
</td>
<td style="vertical-align:middle; width:98px; padding:0; border:none"><p class="p_Normal"><code><b>"redis://redis.default.svc.cluster.local:6379/0"</b></code></p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:258px; padding:0; border:none"><p class="p_Normal"><code><b>elma365.db.redisSecret</b></code></p>
</td>
<td style="vertical-align:top; width:831px; padding:0; border:none"><p class="p_Normal">Имя секрета со строкой подключения к Redis, зашифрованной в Base64 (ключ REDIS_URL)</p>
</td>
<td style="vertical-align:top; width:98px; padding:0; border:none"><p class="p_Normal">&quot; &quot;</p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:258px; padding:0; border:none"><p class="p_Normal"><code><b>elma365.db.amqpUrl</b></code></p>
</td>
<td style="vertical-align:top; width:831px; padding:0; border:none"><p class="p_Normal">Строка подключения к RabbitMQ</p>
</td>
<td style="vertical-align:middle; width:98px; padding:0; border:none"><p class="p_Normal"><code><b>"amqp://elma365:rmqpassword@
rabbitmq.default.svc.
cluster.local:5672/elma365"</b></code></p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:258px; padding:0; border:none"><p class="p_Normal"><code><b>elma365.db.amqpSecret</b></code></p>
</td>
<td style="vertical-align:top; width:831px; padding:0; border:none"><p class="p_Normal">Имя секрета со строкой подключения к RabbitMQ, зашифрованной в Base64 (ключ AMQP_URL)</p>
</td>
<td style="vertical-align:top; width:98px; padding:0; border:none"><p class="p_Normal">&quot; &quot;</p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:258px; padding:0; border:none"><p class="p_Normal"><code><b>elma365.db.s3.method</b></code></p>
</td>
<td style="vertical-align:top; width:831px; padding:0; border:none"><p class="p_Normal">Метод запросов</p>
</td>
<td style="vertical-align:top; width:98px; padding:0; border:none"><p class="p_Normal">PUT</p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:258px; padding:0; border:none"><p class="p_Normal"><code><b>elma365.db.s3.accesskeyid</b></code></p>
</td>
<td style="vertical-align:top; width:831px; padding:0; border:none"><p class="p_Normal">Имя пользователя</p>
</td>
<td style="vertical-align:top; width:98px; padding:0; border:none"><p class="p_Normal"><code><b>PZSF73JG72Ksd955JKU1HIA</b></code></p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:258px; padding:0; border:none"><p class="p_Normal"><code><b>elma365.db.s3.secretaccesskey</b></code></p>
</td>
<td style="vertical-align:top; width:831px; padding:0; border:none"><p class="p_Normal">Пароль для пользователя</p>
</td>
<td style="vertical-align:top; width:98px; padding:0; border:none"><p class="p_Normal"><code><b>aFDkj28Jbs2JKbnvJH678MNwiz88zKjsuNBHHs</b></code></p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:258px; padding:0; border:none"><p class="p_Normal"><code><b>elma365.db.s3.bucket</b></code></p>
</td>
<td style="vertical-align:top; width:831px; padding:0; border:none"><p class="p_Normal">Список бакетов</p>
</td>
<td style="vertical-align:top; width:98px; padding:0; border:none"><p class="p_Normal"><code><b>s3elma365</b></code></p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:258px; padding:0; border:none"><p class="p_Normal"><code><b>elma365.db.s3.backend.address</b></code></p>
</td>
<td style="vertical-align:top; width:831px; padding:0; border:none"><p class="p_Normal">Адрес S3 </p>
</td>
<td style="vertical-align:top; width:98px; padding:0; border:none"><p class="p_Normal"><code><b>example.ru</b></code></p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:258px; padding:0; border:none"><p class="p_Normal"><code><b>elma365.db.s3.backend.region</b></code></p>
</td>
<td style="vertical-align:top; width:831px; padding:0; border:none"><p class="p_Normal">Регион</p>
</td>
<td style="vertical-align:top; width:98px; padding:0; border:none"><p class="p_Normal"><code><b>us-east-1</b></code></p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:258px; padding:0; border:none"><p class="p_Normal"><code><b>elma365.db.s3.ssl.enabled</b></code></p>
</td>
<td style="vertical-align:top; width:831px; padding:0; border:none"><p class="p_Normal">Включение SSL</p>
</td>
<td style="vertical-align:top; width:98px; padding:0; border:none"><p class="p_Normal">&quot;<code><b>false</b></code>&quot;</p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:258px; padding:0; border:none"><p class="p_Normal"><code><b>elma365.db.s3Secret</b></code></p>
</td>
<td style="vertical-align:top; width:831px; padding:0; border:none"><p class="p_Normal">Имя секрета с подключением к S3 хранилищу файлов, зашифрованной в Base64</p>
<p class="p_Normal"> &nbsp;# (ключи S3_BACKEND_ADDRESS, S3_REGION, S3_KEY, S3_SECRET, S3_BUCKET, S3_SSL_ENABLED, S3_UPLOAD_METHOD)</p>
</td>
<td style="vertical-align:top; width:98px; padding:0; border:none"><p class="p_Normal">&quot; &quot;</p>
</td>
</tr>
<tr>
<td colspan="3"  style="vertical-align:top; width:1187px; padding:0; border:none"><p class="p_Normal"><span style="font-weight: bold;">Настройки для подключения к SMTP-серверу отправки почты</span></p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:258px; padding:0; border:none"><p class="p_Normal"><code><b>elma365.mailer.smtp.host</b></code></p>
</td>
<td style="vertical-align:top; width:831px; padding:0; border:none"><p class="p_Normal">Адрес SMTP-сервера</p>
</td>
<td style="vertical-align:top; width:98px; padding:0; border:none"><p class="p_Normal">&quot; &quot;</p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:258px; padding:0; border:none"><p class="p_Normal"><code><b>elma365.mailer.smtp.port</b></code></p>
</td>
<td style="vertical-align:top; width:831px; padding:0; border:none"><p class="p_Normal">Порт SMTP-сервера</p>
</td>
<td style="vertical-align:top; width:98px; padding:0; border:none"><p class="p_Normal">&quot; &quot;</p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:258px; padding:0; border:none"><p class="p_Normal"><code><b>elma365.mailer.smtp.from</b></code></p>
</td>
<td style="vertical-align:top; width:831px; padding:0; border:none"><p class="p_Normal">Адрес отправителя электронной почты</p>
</td>
<td style="vertical-align:top; width:98px; padding:0; border:none"><p class="p_Normal">&quot; &quot;</p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:258px; padding:0; border:none"><p class="p_Normal"><code><b>elma365.mailer.smtp.user</b></code></p>
</td>
<td style="vertical-align:top; width:831px; padding:0; border:none"><p class="p_Normal">Пользователь для авторизации на SMTP-сервере</p>
</td>
<td style="vertical-align:top; width:98px; padding:0; border:none"><p class="p_Normal">&quot; &quot;</p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:258px; padding:0; border:none"><p class="p_Normal"><code><b>elma365.mailer.smtp.password</b></code></p>
</td>
<td style="vertical-align:top; width:831px; padding:0; border:none"><p class="p_Normal">Пароль для авторизации на SMTP-сервере</p>
</td>
<td style="vertical-align:top; width:98px; padding:0; border:none"><p class="p_Normal">&quot; &quot;</p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:258px; padding:0; border:none"><p class="p_Normal"><code><b>elma365.mailer.smtp.needTLS</b></code></p>
</td>
<td style="vertical-align:top; width:831px; padding:0; border:none"><p class="p_Normal">Используется ли шифрование</p>
</td>
<td style="vertical-align:top; width:98px; padding:0; border:none"><p class="p_Normal"><code><b>false</b></code></p>
</td>
</tr>
<tr>
<td colspan="3"  style="vertical-align:top; width:1187px; padding:0; border:none"><p class="p_Normal"><span style="font-weight: bold;">Глобальные параметры сервиса «Аудит безопасности» </span></p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:258px; padding:0; border:none"><p class="p_Normal"><code><b>elma365-addons.audit.global.psql_url</b></code></p>
</td>
<td style="vertical-align:top; width:831px; padding:0; border:none"><p class="p_Normal">Строка подключения к БД PostgreSQL</p>
</td>
<td style="vertical-align:middle; width:98px; padding:0; border:none"><p class="p_Normal"><code><b>"postgresql://postgres:pgpassword@
postgres.default.svc.cluster.
local:5432/audit?sslmode=disable"</b></code></p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:258px; padding:0; border:none"><p class="p_Normal"><code><b>elma365-addons.audit.image.repository</b></code></p>
</td>
<td style="vertical-align:top; width:831px; padding:0; border:none"><p class="p_Normal">Адрес для registry </p>
</td>
<td style="vertical-align:top; width:98px; padding:0; border:none"><p class="p_Normal"><code><b>hub.elma365.tech</b></code></p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:258px; padding:0; border:none"><p class="p_Normal"><code><b>elma365-addons.audit.image.pullSecret</b></code></p>
</td>
<td style="vertical-align:top; width:831px; padding:0; border:none"><p class="p_Normal">Секрет с правами доступа к приватному registry, должен быть создан вручную, зашифрованный в Base64</p>
</td>
<td style="vertical-align:top; width:98px; padding:0; border:none"><p class="p_Normal"><code><b>[yandexsecret]</b></code></p>
</td>
</tr>
</table>
</div>

                        <div class="bottom-nav">
                            
                                <a id="prev-link" class="topic__navi_prev" href="install-kontur-tunnel.html">
                                    <span class="bottom-nav__arrow bottom-nav__arrow--prev"></span> <span
                                        class="bottom-nav__link">install-kontur-tunnel.html</span>
                                </a>
                            
                            
                                <a id="next-link" class="topic__navi_next" href="install-kubernetes.html">
                                    <span class="bottom-nav__link">install-kubernetes.html</span> <span
                                        class="bottom-nav__arrow bottom-nav__arrow--next"></span>
                                </a>
                            
                        </div>
                        <!-- добавляет на страницу строку блок Была ли статья полезной?  -->
                          <div class="feedback-wrap"><div class="feedback" id="feedback"><span><b>Была ли статья полезной?</b></span><form action="" method="POST" class="feedback-form" id="feedback-form"><div class="feedback__popup feedback__popup-response" id="feedback__popup_thx">Спасибо за ваш отзыв!</div><div id="feedback-success-popup"><div class="wrap"><button type="button" class="feedback-popup-close">×</button><svg width="44" height="44" viewBox="0 0 44 44" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_212_2187)"><path d="M22 0.6875C10.2294 0.6875 0.6875 10.2294 0.6875 22C0.6875 33.7706 10.2294 43.3125 22 43.3125C33.7706 43.3125 43.3125 33.7706 43.3125 22C43.3125 10.2294 33.7706 0.6875 22 0.6875ZM22 40.5625C11.8023 40.5625 3.4375 32.3078 3.4375 22C3.4375 11.8024 11.6922 3.4375 22 3.4375C32.1977 3.4375 40.5625 11.6922 40.5625 22C40.5625 32.1976 32.3078 40.5625 22 40.5625ZM34.1713 16.933L18.6613 32.3186C18.257 32.7197 17.604 32.7171 17.203 32.3128L9.82283 24.873C9.42176 24.4686 9.42434 23.8157 9.82867 23.4146L10.5609 22.6884C10.9652 22.2873 11.6181 22.2899 12.0192 22.6942L17.9468 28.6697L31.9926 14.7366C32.3969 14.3356 33.0498 14.3382 33.4509 14.7425L34.1772 15.4747C34.5783 15.879 34.5757 16.532 34.1713 16.933Z" fill="#27AE60"></path></g><defs><clipPath id="clip0_212_2187"><rect width="44" height="44" fill="white"></rect></clipPath></defs></svg><p>Ваш отзыв успешно отправлен!</p><span>Спасибо за обратную связь.</span></div></div><div class="feedback__popup" id="feedback__popup_why"><button type="button" class="feedback-popup-close">×</button><div class="feedback__popup-header">Уточните, почему:</div><input type="radio" name="category" id="bad_recommendation" value="bad_recommendation"><label for="bad_recommendation">Рекомендации не помогли</label><input type="radio" name="category" id="difficult_text" value="difficult_text"><label for="difficult_text">Текст трудно понять</label><input type="radio" name="category" id="no_answer" value="no_answer"><label for="no_answer">Нет ответа на мой вопрос</label><input type="radio" name="category" id="bad_header" value="bad_header"><label for="bad_header">Содержание статьи не соответствует заголовку</label><input type="radio" name="category" id="other_reason" value="other_reason"><label for="other_reason">Другая причина</label></div><div class="feedback__popup" id="feedback__popup-other"><button type="button" class="feedback-popup-close">×</button>   <div class="feedback__popup-header">Расскажите, что вам не понравилось в статье:</div><textarea class="feedback__textarea" name="other" id=""></textarea><input type="submit" class="feedback__other-btn" value="Отправить"></div><div class="feedback-form__btn-group"><input type="radio" name="useful" id="feedback__useful_yes" value="true"><label for="feedback__useful_yes"><img src="like.svg"/><span class="feedback-form__btn-group_yes-btn">Да</span></label><input type="radio" name="useful" id="feedback__useful_no" value="false"><label for="feedback__useful_no"><img src="dislike.svg"/><span class="feedback-form__btn-group_no-btn">Нет</span></label></div><select name="category"><option disabled>Выберите вариант</option><option value="bad_recommendation" selected>Рекомендации не помогли</option><option value="difficult_text">Текст трудно понять</option><option value="no_answer">Нет ответа на мой вопрос</option><option value="bad_header">Содержание статьи не соответствует заголовку</option><option value="other_reason">Другая причина</option></select><input type="submit"></form></div></div>
                           
                    </section>
                </div>
                <aside class="article__sidebar" style="display:none">
                    <input type="checkbox" />
                    <div class="article__arrow"></div>
                    <div class="table-of-contents elma365-right" id="toc2Content">
                        <h3 class="h3-toc">В этой статье</h3>
                        <nav id="toc2"></nav>
                    </div>
                </aside>
            </div>
        </article>
    </main>               
    <footer class="footer">
        <div class="footer-container">
  <div class="footer-mobile">
    
      <ul class="footer-mobile__list"><li><a href="https://api.elma365.com/ru/" target="_blank">API</a></li><li><a href="https://tssdk.elma365.com/" target="_blank">TS SDK</a></li><li><a href="https://community.elma365.com/" target="_blank">Community</a></li><li><a href="https://elma-academy.com/ru/elma365" target="_blank">Академия</a></li></ul><ul class="footer-mobile__list"><li><a href="https://elma365.com/ru/help/platform/get-trial.html">Платформа</a></li><li><a href="https://elma365.com/ru/help/ecm/ecm-functions.html">ECM</a></li><li><a href="https://elma365.com/ru/help/service/service-functions.html">Service</a></li><li><a href="https://elma365.com/ru/help/projects/projects-functions.html">Проекты</a></li></ul>
    
    
  </div>
  <div class="container">
    <div class="footer-wrap">
      
        <div><span class="mobile-question-popup">Отправить фидбэк</span><form method="POST" action class="question__popup question-xs" id="question__popup"><div class="question-wrap"><span class="close"></span><span class="title">Задать вопрос</span><label for="help_question" style="display: none;"></label><textarea name="help_question" id="help_question"></textarea><input type="submit" value="Отправить"></div></form><div class="hidden fade-in question-success-xs">Ваш фидбэк отправлен.</div></div>
      
      <div class="footer-flex-b">
        <div class="footer-top">
          <span class="footer-copy">&copy; 2025 
              ELMA365
            
            
          </span>
          
            <a href="https://navigator.sk.ru/orn/1122971" target="_blank">
              <img src="sk-resident.svg" alt="sk icon" class="footer-img" width="117" height="34">
            </a>
            
        </div>
        <div class="footer-line">
          
            <div class="footer-line-copy">
              <span class="footer-copy">&copy; 2025 
                  ELMA365
                
                
              </span>
            </div>
            
              <ul class="footer-list">
                
                  <li class="footer-item"><a href="https://elma365.com/ru/" target="_blank" class="footer-link" style="color: #0D4A75;"><img src="browse.svg" alt="browse icon" class="footer-img">elma365.com</a></li><li class="footer-item"><a href="https://www.youtube.com/user/ELMABPM" target="_blank" class="footer-link"><img src="yt.svg" alt="youtube icon" class="footer-img"></a></li><li class="footer-item"><a href="https://vk.com/elma_bpm" target="_blank" class="footer-link"><img src="vk.svg" alt="vk icon" class="footer-img"></a></li><li class="footer-item"><a href="https://t.me/elmaday" target="_blank" class="footer-link"><img src="tg.svg" alt="telegram icon" class="footer-img"></a></li><li class="footer-item"><a href="https://dzen.ru/elma" target="_blank" class="footer-link"><img src="dzen.svg" alt="dzen icon" class="footer-img"></a></li>
                
                
                  <li class="footer-item">
                    <a href="https://navigator.sk.ru/orn/1122971" target="_blank">
                      <img src="sk-resident.svg" alt="sk icon" class="footer-img" width="117" height="34">
                    </a>
                  </li>
                
                
              </ul>
        </div>
      </div>
    </div>
  </div>
  <a href="#" class="arrow-top"></a>
</div>
 
    </footer>
    <iframe name="hmnavigation" style="display:none!important"></iframe>
    <script src="./jquery-ui.js"></script>
    <!--script src="//cdn.jsdelivr.net/npm/featherlight@1.7.14/release/featherlight.min.js" type="text/javascript" charset="utf-8"></script-->
    <script src="./jquery.tocify.min.js"></script>
    <script src="./TypoReporter.min.js"></script>
    <script src="./google-search.js"></script>
    <script src="./main.js"></script>
</body>

</html>
